<!DOCTYPE html>
<html lang="en" >
<head>
    <meta charset="utf-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <title>Data Exploration and Profiling</title>
    

    <link rel="stylesheet" href="../_static/css/redactor.css" type="text/css" />
    
    <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    
    
    <link rel="index" title="Index" href="../genindex.html"/>
    <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="luminaire 0.1.0 documentation" href="../index.html"/>
    <link rel="up" title="User Guide" href="user_guide.html"/>
    <link rel="next" title="Luminaire Configuration Optimization" href="optimization.html"/>
    <link rel="prev" title="Luminaire Outlier Detection Models: Structural Modeling" href="batch_models.html"/> 
</head>

<body role="document">
     

    
<a href="#" id="js-navigation-toggle" class="navigation-toggle">
    <i class="mdi mdi-menu"></i><i class="mdi mdi-close"></i>
</a>

<section class="site-sidebar">

<nav>


    <a href="../index.html" class="branding-link">
    
        luminaire
    
    
    
        
        
    
    </a>

    
<section role="search">
    <form action="../search.html" method="get" class="site-searchform">
        <input type="text" name="q" placeholder="Search docs" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
</section>



    <section class="site-nav">
    
    
        <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic_usage_tutorial/tutorials.html">Tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="user_guide.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="batch_models.html">Luminaire Outlier Detection Models: Structural Modeling</a></li>
<li class="toctree-l2"><a class="reference internal" href="batch_models.html#luminaire-outlier-detection-models-factoring-holidays-as-exogenous">Luminaire Outlier Detection Models: Factoring holidays as exogenous</a></li>
<li class="toctree-l2"><a class="reference internal" href="batch_models.html#luminaire-outlier-detection-models-kalman-filter">Luminaire Outlier Detection Models: Kalman Filter</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Data Exploration and Profiling</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimization.html">Luminaire Configuration Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="streaming.html">Luminaire Streaming Anomaly Detection Models: Window Density Model</a></li>
</ul>
</li>
</ul>

    
    </section>

</nav>

</section>

    <main class="site-main" role="main">
        











<nav class="site-breadcrumbs">
    <ul>
    
        <li>
            <a href="../index.html">Docs</a> /
        </li>
        
        <li>
            <a href="user_guide.html">User Guide</a> /
        </li>
        
        <li class="site-breadcrumbs__leaf">Data Exploration and Profiling</li>
    
    </ul>
</nav>
        <section class="site-content">
            <div class="container">
                
  <div class="section" id="data-exploration-and-profiling">
<h1>Data Exploration and Profiling<a class="headerlink" href="#data-exploration-and-profiling" title="Permalink to this headline">¶</a></h1>
digraph inheritance0dc808abaf {
bgcolor=transparent;
rankdir=LR;
size=&quot;8.0, 12.0&quot;;
  &quot;DataExploration&quot; [URL=&quot;#luminaire.exploration.data_exploration.DataExploration&quot;,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5),filled&quot;,target=&quot;_top&quot;,tooltip=&quot;This is a general class for time series data exploration and pre-processing.&quot;];
  &quot;DataExplorationError&quot; [URL=&quot;#luminaire.exploration.data_exploration.DataExplorationError&quot;,fillcolor=white,fontname=&quot;Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans&quot;,fontsize=10,height=0.25,shape=box,style=&quot;setlinewidth(0.5),filled&quot;,target=&quot;_top&quot;,tooltip=&quot;Exception class for Luminaire Data Exploration.&quot;];
}
<span class="target" id="module-luminaire.exploration.data_exploration"></span><dl class="py class">
<dt id="luminaire.exploration.data_exploration.DataExploration">
<em class="property">class </em><code class="sig-prename descclassname">luminaire.exploration.data_exploration.</code><code class="sig-name descname">DataExploration</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">freq</span><span class="o">=</span><span class="default_value">'D'</span></em>, <em class="sig-param"><span class="n">min_ts_mean</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">fill_rate</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">max_window_size</span><span class="o">=</span><span class="default_value">24</span></em>, <em class="sig-param"><span class="n">window_size</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">sig_level</span><span class="o">=</span><span class="default_value">0.05</span></em>, <em class="sig-param"><span class="n">min_ts_length</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">max_ts_length</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">is_log_transformed</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">data_shift_truncate</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">min_changepoint_padding_length</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">change_point_threshold</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#luminaire.exploration.data_exploration.DataExploration" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a general class for time series data exploration and pre-processing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>freq</strong> (<em>str</em>) – The frequency of the time-series. A <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/timeseries.html#timeseries-offset-aliases">Pandas offset</a> such as ‘D’, ‘H’, or ‘M’.</p></li>
<li><p><strong>sig_level</strong> (<em>float</em>) – The significance level to use for any statistical test withing data profile. This should be
a number between 0 and 1.</p></li>
<li><p><strong>min_ts_mean</strong> (<em>float</em><em>, </em><em>optional</em>) – The minimum mean value of the time series required for the model to run. For data that
originated as integers (such as counts), the ARIMA model can behave erratically when the numbers are small. When
this parameter is set, any time series whose mean value is less than this will automatically result in a model
failure, rather than a mostly bogus anomaly.</p></li>
<li><p><strong>fill_rate</strong> (<em>float</em><em>, </em><em>optional</em>) – Minimum proportion of data availability in the recent data window.</p></li>
<li><p><strong>max_window_size</strong> (<em>int</em><em>, </em><em>optional</em>) – The maximum size of the sub windows for input data segmentation.</p></li>
<li><p><strong>window_size</strong> (<em>int</em><em>, </em><em>optional</em>) – The size of the sub windows for input data segmentation.</p></li>
<li><p><strong>min_ts_length</strong> (<em>int</em><em>, </em><em>optional</em>) – The minimum required length of the time series for training.</p></li>
<li><p><strong>max_ts_length</strong> (<em>int</em><em>, </em><em>optional</em>) – The maximum required length of the time series for training.</p></li>
<li><p><strong>is_log_transformed</strong> (<em>bool</em><em>, </em><em>optional</em>) – A flag to specify whether to take a log transform of the input data. If the data
contain negatives, is_log_transformed is ignored even though it is set to True.</p></li>
<li><p><strong>data_shift_truncate</strong> (<em>bool</em><em>, </em><em>optional</em>) – A flag to specify whether left side of the most recent change point needs to
be truncated from the training data.</p></li>
<li><p><strong>min_changepoint_padding_length</strong> (<em>bool</em><em>, </em><em>optional</em>) – A padding length between two change points. This parameter makes sure
that two consecutive change points are not close to each other.</p></li>
<li><p><strong>change_point_threshold</strong> (<em>float</em><em>, </em><em>optional</em>) – Minimum threshold (a value &gt; 0) to flag change points based on KL divergence.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="luminaire.exploration.data_exploration.DataExploration.kf_naive_outlier_detection">
<code class="sig-name descname">kf_naive_outlier_detection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">input_series</span></em>, <em class="sig-param"><span class="n">idx_position</span></em><span class="sig-paren">)</span><a class="headerlink" href="#luminaire.exploration.data_exploration.DataExploration.kf_naive_outlier_detection" title="Permalink to this definition">¶</a></dt>
<dd><p>This function detects outlier for the specified index position of the series.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_series</strong> (<em>numpy.array</em>) – Input time series</p></li>
<li><p><strong>idx_position</strong> (<em>int</em>) – Target index position</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Anomaly flag</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_series</span> <span class="o">=</span> <span class="p">[</span><span class="mi">110</span><span class="p">,</span> <span class="mi">119</span><span class="p">,</span> <span class="mi">316</span><span class="p">,</span> <span class="mi">248</span><span class="p">,</span> <span class="mi">451</span><span class="p">,</span> <span class="mi">324</span><span class="p">,</span> <span class="mi">241</span><span class="p">,</span> <span class="mi">275</span><span class="p">,</span> <span class="mi">381</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">kf_naive_outlier_detection</span><span class="p">(</span><span class="n">input_series</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="luminaire.exploration.data_exploration.DataExploration.profile">
<code class="sig-name descname">profile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df</span></em>, <em class="sig-param"><span class="n">impute_only</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#luminaire.exploration.data_exploration.DataExploration.profile" title="Permalink to this definition">¶</a></dt>
<dd><p>This function performs required data profiling and pre-processing before hyperparameter optimization or time
series model training.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>list/pandas.DataFrame</em>) – Input time series.</p></li>
<li><p><strong>impute_only</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag to perform preprocessing until imputation OR full preprocessing.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Preprocessed dataframe with batch data summary.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple[pandas.dataFrame, dict]</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">de_obj</span> <span class="o">=</span> <span class="n">DataExploration</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="n">data_shift_truncate</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">is_log_transformed</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">fill_rate</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span>
<span class="go">               raw</span>
<span class="go">index</span>
<span class="go">2020-01-01  1326.0</span>
<span class="go">2020-01-02  1552.0</span>
<span class="go">2020-01-03  1432.0</span>
<span class="go">2020-01-04  1470.0</span>
<span class="go">2020-01-05  1565.0</span>
<span class="gp">... </span>           <span class="o">...</span>
<span class="go">2020-06-03  1934.0</span>
<span class="go">2020-06-04  1873.0</span>
<span class="go">2020-06-05  1674.0</span>
<span class="go">2020-06-06  1747.0</span>
<span class="go">2020-06-07  1782.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">,</span> <span class="n">summary</span> <span class="o">=</span> <span class="n">de_obj</span><span class="o">.</span><span class="n">profile</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">,</span> <span class="n">summary</span>
<span class="go">(              raw interpolated</span>
<span class="go">2020-03-16  1371.0       1371.0</span>
<span class="go">2020-03-17  1325.0       1325.0</span>
<span class="go">2020-03-18  1318.0       1318.0</span>
<span class="go">2020-03-19  1270.0       1270.0</span>
<span class="go">2020-03-20  1116.0       1116.0</span>
<span class="gp">... </span>           <span class="o">...</span>          <span class="o">...</span>
<span class="go">2020-06-03  1934.0       1934.0</span>
<span class="go">2020-06-04  1873.0       1873.0</span>
<span class="go">2020-06-05  1674.0       1674.0</span>
<span class="go">2020-06-06  1747.0       1747.0</span>
<span class="go">2020-06-07  1782.0       1782.0</span>
<span class="go">[84 rows x 2 columns], {&#39;success&#39;: True, &#39;trend_change_list&#39;: [&#39;2020-04-01 00:00:00&#39;], &#39;change_point_list&#39;:</span>
<span class="go">[&#39;2020-03-16 00:00:00&#39;], &#39;is_log_transformed&#39;: 0, &#39;min_ts_mean&#39;: None, &#39;ts_start&#39;: &#39;2020-01-01 00:00:00&#39;,</span>
<span class="go">&#39;ts_end&#39;: &#39;2020-06-07 00:00:00&#39;})</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="luminaire.exploration.data_exploration.DataExplorationError">
<em class="property">exception </em><code class="sig-prename descclassname">luminaire.exploration.data_exploration.</code><code class="sig-name descname">DataExplorationError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">message</span></em><span class="sig-paren">)</span><a class="headerlink" href="#luminaire.exploration.data_exploration.DataExplorationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Exception class for Luminaire Data Exploration.</p>
</dd></dl>

</div>


            </div>

        </section>

        
            <nav class="site-bottom-navigation" role="navigation">
            
                <a href="optimization.html" class="btn btn--primary btn--next right"
                    title="Luminaire Configuration Optimization" accesskey="n">
                    Next
                </a>
            
            
                <a href="batch_models.html" class="btn btn--primary btn--prev"
                    title="Luminaire Outlier Detection Models: Structural Modeling" accesskey="p">
                    Previous
                </a>
            
            </nav>
        

        
            <div class="source-link">
            
                
                    <a href="../_sources/user_guide/exploration.rst.txt" rel="nofollow">
                        <i class="mdi mdi-code-tags"></i>
                        View page source
                    </a>
                
            
            </div>
        



    </main>

    <footer class="site-footer">
<div class="container">

    <div role="contentinfo">
        <p>
                &copy; Copyright 2020 Zillow, Inc..
        </p>
    </div>
        <p>Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
        <a href="https://github.com/testthedocs/sphinx_ttd_theme">theme</a>
        provided by <a href="https://testthedocs">TestTheDocs</a>. 

</div>
</footer>

    

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'',
            VERSION:'0.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/js/theme-min.js"></script> 
</body>
</html>